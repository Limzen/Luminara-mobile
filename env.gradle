// üîê Environment Configuration Helper
// This script helps load environment variables from .env files

def getEnvVariable(String key, String defaultValue = "") {
    def value = System.getenv(key)
    if (value != null) return value
    
    // Try to load from local.env file
    def envFile = project.file("local.env")
    if (envFile.exists()) {
        def properties = new Properties()
        envFile.withInputStream { properties.load(it) }
        value = properties.getProperty(key)
        if (value != null) return value
    }
    
    // Try to load from .env file
    envFile = project.file(".env")
    if (envFile.exists()) {
        def properties = new Properties()
        envFile.withInputStream { properties.load(it) }
        value = properties.getProperty(key)
        if (value != null) return value
    }
    
    return defaultValue
}

// Export the function for use in build.gradle.kts
ext.getEnvVariable = this.&getEnvVariable
